# CPU ( Central Processing Unit )

## CPUとコンピュータの５大装置

### 5大装置とそれぞれの役割

- 制御装置  
  - 中央処理装置（CPU）  
    プログラムの命令を解釈して、コンピュータ全体の動作を制御  

- 演算装置  
  - 中央処理装置（CPU）  
    - 四則演算等の計算、データの演算処理を行う
    - 算術論理演算装置（ALU）とも呼ばれる

- 記憶装置  
  - 主記憶装置  
    - 制御するために必要なプログラムやデータを一時的に記憶する装置
    - CPUが直接やりとりする装置
    - メモリ
  - 補助記憶装置  
    - プログラムやデータを一時的に記憶する装置
    - ハードディスクやCD-ROMなど

- 入力装置  
  - コンピュータにデータを入力するための装置
  - マウスやキーボード等

- 出力装置  
  - データを出力するための装置
  - ディスプレイやプリンタ等

### ノイマン型コンピュータ

- プログラムの実行順序  
    以下、ノイマン型コンピュータの特徴
    ① 補助記憶装置→主記憶装置
    - プログラム内蔵方式（プログラム記憶方式・プログラム格納方式）  
        実行時にはプログラムをあらかじめ主記憶装置上に読み込んで（ロードして）おく方式  
        主記憶装置にデータ・プログラムの両方とも格納する方式  

    ② 補助記憶装置→CPU  
    - 逐次制御方式  
        命令を主記憶装置から一つずつ取り出して順番に実行していく方式  

- 主記憶装置上の記憶場所  
    アドレス（番地）で管理

### CPUの命令実行手順とレジスタ

- レジスタとは  
    CPU内部の記憶装置

- レジスタの種類と役割  
    - プログラムカウンタ  
        次の命令のアドレスを記憶
    - 命令レジスタ  
        取り出した命令を一時的に記憶  
    - インデックス（指標）レジスタ  
        連続データの取り出しに使うための増分値を保持
    - ベースレジスタ    
        プログラムの先頭アドレスを保持
    - アキュムレータ  
        演算の対象となる数や演算結果を保持
    - 汎用レジスタ      
        機能を限定していないレジスタ
    - フラグレジスタ  
        条件付き分岐命令を実施するために、演算結果の状態を保持する

- 命令の実行順序  
    ① 命令の取り出し（フェッチ）  
    　　**プログラムカウンタ**が記憶しているメモリアドレスから命令を取り出す  
    　　取り出した命令を**命令レジスタ**に記憶させる    
    ② 命令の解読（デコード）  
    　　命令レジスタは命令部とオペランド部から成る  
    　　命令部の中身が命令デコーダに送られる  
    　　命令でコードは制御信号を必要な装置に出す  
    ③ 対象データ読み出し（オペランドのアドレス計算、フェッチ）  
    　　オペランドのメモリアドレスを使い、データを取り出し(フェッチ)  
    　　汎用レジスタ等に記憶  
    ④ 命令実行  
    　　汎用レジスタから対象処理のデータを取り出して演算する  

### 機械語のアドレス指定方式

- 実効アドレス  
    計算によって求めた主記憶装置上のアドレス

- アドレス修飾方式（アドレス指定）  
    計算によってアドレスを求める方式  

  - 即値アドレス（オペランド）指定方式  
    オペランド部に対象となるデータそのものが入っている方式  

  - 直接アドレス指定方式  
    オペランド部に記載してあるアドレスがそのまま実効アドレスとして使える  

  - 間接アドレス指定方式  
    オペランド部に対象となるデータが入っている箇所を示すメモリアドレス（実効アドレス）が記載されている  
    オペランド部が指し示すメモリアドレスの中に実効アドレスが記載されている

  - インデックス（指標アドレス）指定方式  
    - オペランド部の値に、インデックス（指標）レジスタの値を加算することで実効アドレスを求める  
    - インデックスレジスタ  
        連続したアドレスを扱うときに用いるレジスタ

  - ベースアドレス指定方式  
    - オペランド部の値にベースレジスタの値を加算することで実効アドレスを求める
    - プログラム先頭アドレスからの差分をオペランド部で指定している  
    - ベースレジスタ  
        プログラムがメモリ上にロードされたときの、先頭アドレスを記載しているレジスタ

  - 相対アドレス指定方式  
    - オペランド部の値にプログラムカウンタの値を加算することで実効アドレスを求める

### CPUの性能評価

- クロック  
    - コンピュータを同調して動かすための周期的な信号  

  - クロック周波数  
    - クロックが１秒間に繰り返される回数
    - 単位：Hz  

  - クロックサイクル時間
    - １クロックに要する時間
    - １秒　÷　クロック周波数（Hz）

- CPI(Clock cycles Per Instruction)  
  - １命令あたり何クロックサイクル必要か

- MIPS(Million Instructions Per Second)  
  - １秒間に実行できる命令の数（百万単位）

- 命令の実行時間  
  １秒　÷　クロック周波数　×　CPI

### 命令ミックス

- 命令ミックスとは  
    よく使われる命令をひとつのセットにしたもの  
    出現頻度を使って、ミックスしたMIPSを算出する
